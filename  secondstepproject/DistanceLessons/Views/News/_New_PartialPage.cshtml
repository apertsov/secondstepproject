@model IEnumerable<DistanceLessons.Models.News>

@{
    DistanceLessons.Models.DataEntitiesManager _db_ = new DistanceLessons.Models.DataEntitiesManager();
    if ((_db_.UserRole(User.Identity.Name) == DistanceLessons.Models.UserRoles.Admin.ToString()) || (_db_.UserRole(User.Identity.Name) == DistanceLessons.Models.UserRoles.Teacher.ToString()) || (_db_.UserRole(User.Identity.Name) == DistanceLessons.Models.UserRoles.Dean.ToString()))
    {
        <div class="item">
            @Ajax.ActionLink("Створити новину", "Create", new AjaxOptions() {UpdateTargetId = "news_ajax", InsertionMode = InsertionMode.Replace})
        </div>
    }
}

@using DistanceLessons.Helpers
<ul>
    @{
        foreach (DistanceLessons.Models.News _new in Model)
        {
        <div class="item">
        <li>
            <h4>@_new.Title</h4>
            <div class="prologue">@Html.TextHtml(_new.Text)</div>
            <div class="time-author">
                -@_new.User.Login, @_new.Publication        
                @{
            DistanceLessons.Models.DataEntitiesManager _db = new DistanceLessons.Models.DataEntitiesManager();
            if ((_db.UserRole(User.Identity.Name) == DistanceLessons.Models.UserRoles.Admin.ToString()) || (_db.UserRole(User.Identity.Name) == DistanceLessons.Models.UserRoles.Teacher.ToString()) || (_db.UserRole(User.Identity.Name) == DistanceLessons.Models.UserRoles.Dean.ToString()))
            {
                        @Ajax.ActionLink("Редагувати", "Edit", new { id = _new.NewId }, new AjaxOptions() { UpdateTargetId = "news_ajax", InsertionMode = InsertionMode.Replace })
                        @Ajax.ActionLink("Видалити", "Delete", new { id = _new.NewId }, new AjaxOptions() { UpdateTargetId = "news_ajax", InsertionMode = InsertionMode.Replace })
            }
                    @Ajax.ActionLink("Читати...", "Detail", new { id = _new.NewId }, new AjaxOptions() { UpdateTargetId = "news_ajax", InsertionMode = InsertionMode.Replace })
                 }
             </div>
        </li>
        </div>
        }
    }
</ul>

<div class="item">
        @Ajax.Pages((int)ViewData["numPage"], (int)ViewData["itemsCount"], (int)ViewData["itemOnPage"], "news_ajax", "Index")
</div>