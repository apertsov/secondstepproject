@model IEnumerable<DistanceLessons.Models.Message>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Повідомлення</h2>

<p>
    @Html.ActionLink("Прийняті", "Index", "Message")   
    @Html.ActionLink("Надіслані", "SendList","Message")
</p>
<table >

<tr align=center valign=middle>
        <th> Від кого </th>
        <th> Повідомлення </th>
        <th> Дата </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
    
    if((item.Status==2)||(item.Status==3))
    { 
       continue;
    } 
    <tr align="center" valign="middle" style="@((item.Status == 1) ? "background-color:#f9e9e6" : "background-color:#f4f5fa"
                                                 )"> 
    
    
    
    <!--<tr align=center valign=middle>-->
        <td>
        @{
             
    List<DistanceLessons.Models.User> userList = ViewBag.Users;

    string name = " ";

    foreach (DistanceLessons.Models.User obj in userList)
    {
        if (obj.UserId == item.UserId_From) { name = obj.Login; break; }
    }

         
            }
            @Html.Label(name)
         </td>
        <td>
            @Html.DisplayFor(modelItem => item.Message1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateOfSender)
        </td>
        <td>
            @Html.ActionLink("Видалити", "Delete", new { id = item.MessageId, status = 3 })
            @Html.ActionLink("Прочитати", "Edit", "Message", new { id =item.MessageId},null)
        </td>
    </tr>
}
</table>
